!function(){"use strict";var e=document.getElementById("demoCanvasTop"),t=e.getContext("2d");t.font="24px Arial",t.textAlign="center",t.textBaseline="middle";var n=e.width,a=e.height,r=n/2,o=a/2,i=document.getElementById("fileInput"),l=n/10,c=100,s=10,h=new(window.AudioContext||window.webkitAudioContext),d=h.createAnalyser();d.fftSize=1024;var g=d.frequencyBinCount,u=new Uint8Array(g),f=document.getElementById("audioElement");function b(){t.lineWidth=1;var e=.3*l;t.font=e+"px Arial",t.fillStyle="rgba(173, 216, 230, .2)";var n,a,i,c=isNaN(f.duration)?"0:00":(n=f.currentTime,a=Math.floor(n/60).toString(),i=1===(i=Math.floor(n%60).toString()).length?"0"+i:i,a+":"+i);t.beginPath(),t.fillText(c,r,o)}function m(){var e;!function(){var e=.66*g-c;t.lineWidth=2,d.getByteFrequencyData(u),t.save(),t.translate(r,o),t.rotate(270*Math.PI/180);for(var n=c;n<e;n++){var a=u[n]<s?s:.6*u[n];t.rotate(2*Math.PI/(e-c)),t.beginPath(),t.strokeStyle="rgba(0, 0, 255, .8)",t.moveTo(l,0),t.lineTo(l+a,0),t.stroke(),t.closePath(),t.beginPath(),t.strokeStyle="rgba(173, 216, 230, .15)",t.moveTo(l,0),t.lineTo(l+a/3,0),t.stroke(),t.closePath()}t.restore()}(),e=f.currentTime/f.duration*2,t.beginPath(),t.strokeStyle="rgba(255, 255, 255, .2)",t.arc(r,o,.55*l,0,2*Math.PI),t.stroke(),t.beginPath(),t.arc(r,o,.8*l,0,2*Math.PI),t.stroke(),t.beginPath(),t.strokeStyle="rgba(173, 216, 230, 0.05)",t.lineWidth=.25*l,t.arc(r,o,.675*l,0,e*Math.PI),t.stroke(),b()}h.createMediaElementSource(f).connect(d),d.connect(h.destination),i.onchange=function(){var e=this.files;URL.revokeObjectURL(f.src),f.src=URL.createObjectURL(e[0]),f.load(),f.play()},function e(){t.clearRect(0,0,n,a),t.beginPath(),t.fillStyle="rgba(44, 44, 44, 1)",t.fillRect(0,0,n,a),m(),requestAnimationFrame(e)}()}();