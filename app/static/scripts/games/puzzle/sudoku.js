!function(){"use strict";var t,e,r=[[],[],[],[],[],[],[],[],[]],n=[],o={x:"",y:"",number:"",opX:"",opY:"",opNumber:""},i=9,s=[1,2,3,4,5,6,7,8,9],u=document.querySelectorAll(".sudoku-number-button"),a=document.querySelectorAll(".sudoku-difficulty-button"),l=document.querySelectorAll(".sudoku-validation-type-button"),h=document.getElementById("startNewGameButton"),d=document.querySelectorAll(".sudoku-number-wrapper"),f=document.getElementById("sudokuPlayButton"),c=document.getElementById("sudokuStartPage"),p="x",v=!1,m=!0,g=Date.now(),y=0,x={easy:40,medium:50,hard:64},k={entry:function(t){var e=t.id.split("-")[1],r=t.id.split("-")[2];t.parentNode.classList.remove("sudoku-user-error-single"),d.forEach(function(t){t.classList.remove("sudoku-user-error")}),s=e,u=t,a=document.querySelectorAll('span[id^="sudoku-'+s+'"]'),Y(a,A(a,u)),n=r,o=t,i=document.querySelectorAll('span[id$="-'+n+'"]'),Y(i,A(i,o)),function(t,e,r){for(var n=[],o=3*Math.floor(t/3),i=3*Math.floor(e/3),s=i;s<i+3;s++)for(var u=o;u<o+3;u++)n.push(document.getElementById("sudoku-"+s+"-"+u));Y(n,A(n,r))}(r,e,t);var n,o,i;var s,u,a},completion:function(e){if(!t)return}},b=k.entry,w=x.easy;function M(){for(var t=s.slice(0),e=[],r=0;r<i;r++){var n=t[E(0,t.length-1)];e.push(n),t.splice(t.indexOf(n),1)}return e}function E(t,e){return Math.floor(Math.random()*(e-t+1))+t}function L(t,e){var n=function(t,e,n,o){for(var i=r[e][t].numsToSkip,s=0;s<n.length;s++)if(-1===i.indexOf(n[s])&&I(t,e,n[s]))return n[s];return!1}(e,t,r[t][e].candidates);if(!1!==n){if(r[t][e].number=n,++e===i&&(e=0,++t===i))return;return L(t,e)}if(0!==e||0!==t){var o=0===e?i-1:e-1,s=0===e?t-1:t;return r[s][o].numsToSkip.push(r[s][o].number),r[s][o].number="",r[t][e].numsToSkip=[],L(s,o)}}function S(t){if(function t(){return o.y=E(0,s.length-1),0===n[o.y].length?(o.y="",t()):(o.x=n[o.y][E(0,n[o.y].length-1)],o.opY=i-1-o.y,0===n[o.opY].length?(o.opY="",o.y="",o.x="",t()):(o.opX=i-1-o.x,r[o.y][o.x].isClue=!1,r[o.opY][o.opX].isClue=!1,o.number=r[o.y][o.x].number,o.opNumber=r[o.opY][o.opX].number,n[o.y].splice(n[o.y].indexOf(o.x),1),n[o.opY].splice(n[o.opY].indexOf(o.opX),1),!0))}(),function(){for(var t=0;t<i;t++)for(var e=0;e<i;e++)r[t][e].isClue||(r[t][e].number="")}(),1===function(t){var e=[];e.length=t[0].length;for(var r=0;r<e.length;r++)e[r]={};for(var n=0;n<e.length;n++)e[n].index=n,e[n].up=e[n],e[n].down=e[n],n>=0?(n-1>=0&&(e[n].left=e[n-1]),n+1<e.length&&(e[n].right=e[n+1])):(e[n].left=e[n],e[n].right=e[n]),e[n].size=0;for(var o=0;o<t.length;o++)for(var i=null,s=0;s<t[o].length;s++)if(t[o][s]){var u={};u.row=o,u.column=e[s],u.up=e[s].up,u.down=e[s],i?(u.left=i,u.right=i.right,i.right.left=u,i.right=u):(u.left=u,u.right=u),e[s].up.down=u,e[s].up=u,e[s].size++,i=u}var a={};a.right=e[0],a.left=e[e.length-1],e[0].left=a,e[e.length-1].right=a;var l=[];return function t(e,r,n,o){if(e.right===e)return n.push(r.slice(0)),n.length>=2?n:null;for(var i=null,s=99999,u=e.right;u!==e;u=u.right){if(0===u.size)return null;u.size<s&&(s=u.size,i=u)}C(i);for(var a=i.down;a!==i;a=a.down){for(r[o]=a.row,u=a.right;u!==a;u=u.right)C(u.column);if(null!=(s=t(e,r,n,o+1)))return s;for(u=a.left;u!==a;u=u.left)B(u.column)}return B(i),null}(a,[],l,0),l}(function(t){for(var e,r=[],n=0;n<9;n++)for(var o=0;o<9;o++){var i=t[n][o]-1;if(i>=0)(e=[]).length=324,e[9*n+o]=1,e[81+9*n+i]=1,e[162+9*o+i]=1,e[243+9*(3*Math.floor(n/3)+Math.floor(o/3))+i]=1,r.push(e);else for(var s=0;s<9;s++)(e=[]).length=324,e[9*n+o]=1,e[81+9*n+s]=1,e[162+9*o+s]=1,e[243+9*(3*Math.floor(n/3)+Math.floor(o/3))+s]=1,r.push(e)}return r}(function(){for(var t=[],e=0;e<i;e++){t[e]=[];for(var n=0;n<i;n++)t[e][n]=r[e][n].number}return t}())).length){if((t-=2)>0&&z()>2)return S(t)}else if(r[o.y][o.x].number=o.number,r[o.opY][o.opX].number=o.opNumber,r[o.y][o.x].isClue=!0,r[o.opY][o.opX].isClue=!0,z()>2)return S(t)}function z(){for(var t=0,e=0;e<i;e++)t+=n[e].length;return t}function C(t){t.right.left=t.left,t.left.right=t.right;for(var e=t.down;e!=t;e=e.down)for(var r=e.right;r!=e;r=r.right)r.down.up=r.up,r.up.down=r.down,r.column.size--}function B(t){for(var e=t.up;e!=t;e=e.up)for(var r=e.left;r!=e;r=r.left)r.column.size++,r.down.up=r,r.up.down=r;t.right.left=t,t.left.right=t}function I(t,e,n){return!!function(t,e,n){for(var o=0;o<i;o++)if(r[e][o].number===n&&o!==t)return!1;return!0}(t,e,n)&&(!!function(t,e,n){for(var o=0;o<i;o++)if(r[o][t].number===n&&o!==e)return!1;return!0}(t,e,n)&&!!function(t,e,n){for(var o=3*Math.floor(t/3),i=3*Math.floor(e/3),s=i;s<i+3;s++)for(var u=o;u<o+3;u++)if(r[s][u].number===n)return!1;return!0}(t,e,n))}function T(o){var s,u;t=!1,m=!0,v&&(s=document.getElementById("sudokuWinCanvas"),u=s.getContext("2d"),s.classList.remove("sudoku-hidden"),u.clearRect(0,0,s.width,s.height),u.fillStyle="rgba(222, 222, 222, 1)",u.fillRect(0,0,s.width,s.height),u.fillStyle="black",u.textAlign="center",u.textBaseline="middle",u.font="48px Arial",u.beginPath(),u.fillText("Generating puzzle...",s.width/2,s.height/2)),function(){for(var t=0;t<i;t++)for(var e=0;e<i;e++)r[t][e]={candidates:M(),number:"",numsToSkip:[],isClue:!1}}(),L(0,0),function(){for(var t=0;t<i;t++)for(var e=0;e<i;e++)r[t][e].isClue=!0}(),e=function(){for(var t="",e=0;e<i;e++)for(var n=0;n<i;n++)t+=r[e][n].number.toString();return t}(),function(){for(var t=0;t<i;t++)n[t]=[0,1,2,3,4,5,6,7,8]}(),S(o),function(){for(var t=0,n=0;n<i;n++)for(var o=0;o<i;o++)r[n][o].number=e[t],t++}(),function(){for(var t=0;t<9;t++)for(var e=0;e<9;e++){var n=document.getElementById("sudoku-"+t+"-"+e);n.classList.remove("sudoku-user-entry"),r[t][e].isClue?n.innerText=r[t][e].number.toString():(n.innerText=" ",n.classList.add("sudoku-user-entry"))}}(),m=!1,v=!0,document.getElementById("sudokuWinCanvas").classList.add("sudoku-hidden"),g=Date.now()}function q(){var e=document.getElementById(this.dataset.cell);e.classList.contains("sudoku-user-entry")&&(e.innerText="x"!==p?p:" ",b(e),function(){for(var e=!1,n=0;n<d.length;n++){var o=document.getElementById(d[n].dataset.cell);if(" "===o.innerText)return!1}for(var s=0;s<i;s++)for(var u=0;u<i;u++)document.getElementById("sudoku-"+s+"-"+u).innerText!==r[s][u].number&&(document.getElementById("sudoku-"+s+"-"+u).parentNode.classList.add("sudoku-user-error-single"),e=!0);e||(t=!0,y=Math.floor((Date.now()-g)/1e3),function(){var t=document.getElementById("sudokuWinCanvas");t.classList.remove("sudoku-hidden");var e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),e.textAlign="center",e.textBaseline="middle";var r=[],n=[],o=400,i=5,s=0,u=420;function a(t){this.pos={x:t?t.x:0,y:t?t.y:0},this.vel={x:0,y:0},this.shrink=.97,this.size=2,this.resistance=1,this.gravity=0,this.flick=!1,this.alpha=1,this.fade=0,this.color=0}function l(e){a.apply(this,[{x:e,y:t.height}]),this.explosionColor=0}a.prototype.update=function(){this.vel.x*=this.resistance,this.vel.y*=this.resistance,this.vel.y+=this.gravity,this.pos.x+=this.vel.x,this.pos.y+=this.vel.y,this.size*=this.shrink,this.alpha-=this.fade},a.prototype.render=function(t){if(!(this.alpha<=.1&&this.size<=1)){t.save(),t.globalCompositeOperation="lighter";var e=t.createRadialGradient(this.pos.x,this.pos.y,.1,this.pos.x,this.pos.y,this.size/2);e.addColorStop(.1,"rgba(255,255,255,"+this.alpha+")"),e.addColorStop(.8,"hsla("+this.color+", 100%, 50%, "+this.alpha+")"),e.addColorStop(1,"hsla("+this.color+", 100%, 50%, 0.1)"),t.fillStyle=e,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.flick?Math.random()*this.size:this.size,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()}},l.prototype=new a,l.prototype.constructor=l,l.prototype.explode=function(){for(var t=10*Math.random()+80,e=0;e<t;e++){var n=new a(this.pos),o=Math.random()*Math.PI*2,i=15*Math.cos(Math.random()*Math.PI/2);n.vel.x=Math.cos(o)*i,n.vel.y=Math.sin(o)*i,n.size=10,n.gravity=.2,n.resistance=.92,n.shrink=.05*Math.random()+.93,n.flick=!0,n.color=this.explosionColor,r.push(n)}},l.prototype.render=function(t){if(!(this.alpha<=.1&&this.size<=1)){t.save(),t.globalCompositeOperation="lighter";var e=t.createRadialGradient(this.pos.x,this.pos.y,.1,this.pos.x,this.pos.y,this.size/2);e.addColorStop(.1,"rgba(255, 255, 255 ,"+this.alpha+")"),e.addColorStop(1,"rgba(0, 0, 0, "+this.alpha+")"),t.fillStyle=e,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.flick?Math.random()*this.size/2+this.size/2:this.size,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()}},requestAnimationFrame(function a(){s++;e.fillStyle="white",e.beginPath(),e.font="60px Arial",e.fillText("You Win!",t.width/2,t.height/2),e.font="30px Arial",e.fillText("Time: "+y+" seconds",t.width/2,t.height/2+50);s%45==0&&i>0&&(h=t.width/2,(d=new l(h)).explosionColor=10*Math.floor(360*Math.random()/10),d.vel.y=-3*Math.random()-4,d.vel.x=6*Math.random()-3,d.size=8,d.shrink=.999,d.gravity=.01,n.push(d),i--);var h,d;!function(){var i=[],s=[];e.fillStyle="rgba(0, 0, 0, 0.05)",e.fillRect(0,0,t.width,t.height);for(var u=0;u<n.length;u++){n[u].update(),n[u].render(e);var a=Math.sqrt(Math.pow(t.width/2-n[u].pos.x,2)+Math.pow(t.height/2-n[u].pos.y,2)),l=n[u].pos.y<2*t.height/3&&100*Math.random()<=1;n[u].pos.y<t.height/5||n[u].vel.y>=0||a<50||l?n[u].explode():i.push(n[u])}n=i;for(var h=0;h<r.length;h++)r[h].update(),r[h].alpha>=.1&&r[h].size>=1&&(r[h].render(e),s.push(r[h]));r=s;for(;r.length>o;)r.shift()}();s<u?requestAnimationFrame(a):(r=[],n=[],void 0,t.classList.add("sudoku-hidden"))})}())}())}function A(t,e){var r=!0;return" "!=e.innerText&&t.forEach(function(t){t.id!==e.id&&t.innerText===e.innerText&&(r=!1)}),r||e.parentNode.classList.add("sudoku-user-error-single"),r}function P(){d.forEach(function(t){t.classList.remove("sudoku-user-error-single"),t.classList.remove("sudoku-user-error")})}function Y(t,e){e||t.forEach(function(t){e?t.parentNode.classList.remove("sudoku-user-error"):t.parentNode.classList.add("sudoku-user-error")})}function N(){p=this.dataset.number,u.forEach(function(t){t.classList.remove("sudoku-selected-button")}),this.classList.add("sudoku-selected-button")}function R(){m||w===x[this.dataset.difficulty]||(P(),a.forEach(function(t){t.classList.remove("sudoku-selected-button")}),this.classList.add("sudoku-selected-button"),w=x[this.dataset.difficulty],T(x[this.dataset.difficulty]))}function X(){P(),l.forEach(function(t){t.classList.remove("sudoku-selected-button")}),this.classList.add("sudoku-selected-button"),b=k[this.dataset.method]}T(w),u.forEach(function(t){t.addEventListener("click",N)}),a.forEach(function(t){t.addEventListener("click",R)}),l.forEach(function(t){t.addEventListener("click",X)}),d.forEach(function(t){t.addEventListener("click",q)}),h.addEventListener("click",function(){m||(P(),T(w))}),f.addEventListener("click",function(){var t=document.getElementById("fullScreenWrapper"),e=t.requestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullscreen;c.classList.add("sudoku-hidden");try{e.call(t)}catch(t){console.log("no full screen")}})}();