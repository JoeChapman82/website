!function(){"use strict";var e,t,n,o,i,r,a,l=document.getElementById("canvas"),d=l.getContext("2d"),h=document.getElementById("fileInput"),c=document.getElementById("controlsWrapper"),s=100,u=100,g=10,f="demo",m=!1,v="Work in progress. Choose an audio file below",y={circular:function(){return function(){var e=.66*i-u;d.lineWidth=2,o.getByteFrequencyData(r),d.save(),d.translate(l.width/2,l.height/2),d.rotate(270*Math.PI/180);for(var t=u;t<e;t++){var n=r[t]<g?g:r[t];n*=m?.5:.8,d.rotate(2*Math.PI/(e-u)),d.beginPath(),d.strokeStyle="rgba(0, 0, 255, .8)",d.moveTo(s,0),d.lineTo(s+n,0),d.stroke(),d.closePath(),d.beginPath(),d.strokeStyle="rgba(173, 216, 230, .15)",d.moveTo(s,0),d.lineTo(s+n/3,0),d.stroke(),d.closePath()}d.restore()}()},linear:function(){return function(){var e=0;d.fillStyle="red",o.getByteFrequencyData(r);for(var t=0;t<i;t++){var n=r[t];d.fillRect(e,l.height-n,a,n),e+=a+1}}()},demo:function(){return function(){d.lineWidth=2,d.save(),d.translate(l.width/2,l.height/2),d.rotate(270*Math.PI/180);for(var e=0;e<150;e++){d.rotate(2*Math.PI/150),d.beginPath(),d.strokeStyle="rgba(0, 0, 255, .8)",d.moveTo(s,0),d.lineTo(s+10,0),d.stroke(),d.closePath(),d.beginPath(),d.strokeStyle="rgba(173, 216, 230, .15)",d.moveTo(s,0),d.lineTo(s+10/3,0),d.stroke(),d.closePath()}d.restore()}()},random:function(){return function(){d.fillStyle="red",d.strokeStyle="red",o.getByteFrequencyData(r),d.save(),d.translate(l.width/2,l.height/2);for(var e=0;e<i;e++){var t=r[e]<g?g:r[e],n=e/(i/2)*Math.PI;d.beginPath(),d.rotate(2*Math.PI*n),d.moveTo(100,0),d.lineTo(100+t,0),d.stroke(),d.closePath()}d.restore()}()}};function w(){l.width=window.innerWidth,l.height=window.innerHeight-50,s=l.width>l.height?l.height/4:l.width/4,m=l.width>l.height?2*s+255>l.height:2*s+255>l.width,a=void 0===i?0:l.width/i,d.font="24px Arial",d.textAlign="center",d.textBaseline="middle"}w(),h.onchange=function(){var d,h=this.files;c.removeChild(document.getElementById("audioElement")),(e=document.createElement("audio")).controls=!0,e.controlsList="nodownload",e.classList.add("audio-visualiser-audio-control"),e.setAttribute("id","audioElement"),c.appendChild(e),e.playbackRate=5,e.onended=function(e){URL.revokeObjectURL(this.src)},e.src=URL.createObjectURL(h[0]),d=h[0].name,v=d.slice(0,d.lastIndexOf(".")),e.load(),t=new AudioContext,n=t.createMediaElementSource(e),o=t.createAnalyser(),n.connect(o),o.connect(t.destination),o.fftSize=1024,i=o.frequencyBinCount,r=new Uint8Array(i),a=l.width/i,f="circular",e.play()},function e(){d.fillStyle="rgba(0, 0, 0, 1)",d.fillRect(0,0,l.width,l.height),y[f](),d.strokeStyle="red",d.beginPath(),d.strokeText(v,l.width/2,35),d.stroke(),requestAnimationFrame(e)}(),window.addEventListener("resize",w)}();